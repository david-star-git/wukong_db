{% extends "base.html" %}
{% block styles %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">
{% endblock %}
{% block content %}
<div class="dashboard">

    <!-- â”€â”€ LEFT SIDEBAR â”€â”€ -->
    <aside class="workers">
        <div class="workers-header">Employees</div>
        {% for w in workers %}
            <div class="worker {% if not w.active %}inactive{% endif %}"
                 data-worker-id="{{ w.id }}">
                <span class="worker-dot {% if w.active %}active{% endif %}"></span>
                {{ w.display_name }}
            </div>
        {% endfor %}
    </aside>

    <!-- â”€â”€ MAIN CONTENT â”€â”€ -->
    <main class="content" id="main-content">

        <div class="worker-header">
            <div class="worker-identity">
                <h1 id="worker-name">â€”</h1>
                <div class="worker-meta">
                    <span class="badge" id="worker-cedula-badge"></span>
                    <span class="badge seniority-badge" id="worker-seniority"></span>
                </div>
            </div>
            <div class="stars-block">
                <div class="stars-label">Performance Rating</div>
                <div class="stars" id="worker-stars">
                    <span class="star" data-i="1">â˜…</span>
                    <span class="star" data-i="2">â˜…</span>
                    <span class="star" data-i="3">â˜…</span>
                    <span class="star" data-i="4">â˜…</span>
                    <span class="star" data-i="5">â˜…</span>
                </div>
                <div class="stars-sub" id="stars-sub"></div>
            </div>
        </div>

        <!-- â”€â”€ STAT CARDS â”€â”€ -->
        <div class="stat-cards">
            <div class="stat-card">
                <div class="stat-icon">ğŸ“…</div>
                <div class="stat-body">
                    <div class="stat-value" id="stat-days">â€”</div>
                    <div class="stat-label">Total Days Worked</div>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">ğŸ“†</div>
                <div class="stat-body">
                    <div class="stat-value" id="stat-weeks">â€”</div>
                    <div class="stat-label">Weeks on Record</div>
                </div>
            </div>
            <div class="stat-card accent">
                <div class="stat-icon">ğŸ’°</div>
                <div class="stat-body">
                    <div class="stat-value" id="stat-salary">â€”</div>
                    <div class="stat-label">Total Salary Paid</div>
                </div>
            </div>
            <div class="stat-card green">
                <div class="stat-icon">ğŸ</div>
                <div class="stat-body">
                    <div class="stat-value" id="stat-bonus">â€”</div>
                    <div class="stat-label">Total Bonus Received</div>
                </div>
            </div>
            <div class="stat-card highlight">
                <div class="stat-icon">ğŸ¯</div>
                <div class="stat-body">
                    <div class="stat-value" id="stat-likelihood">â€”</div>
                    <div class="stat-label">Bonus Likelihood <span class="sub">(last month)</span></div>
                    <div class="likelihood-bar-wrap">
                        <div class="likelihood-bar" id="likelihood-bar"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- â”€â”€ CHARTS â”€â”€ -->
        <div class="charts-grid">
            <div class="chart-card span2">
                <div class="chart-title">Days Worked per Week</div>
                <canvas id="daysChart"></canvas>
            </div>
            <div class="chart-card span2">
                <div class="chart-title">Bonus per Week</div>
                <canvas id="bonusChart"></canvas>
            </div>
            <div class="chart-card full">
                <div class="chart-title">Days by Construction Site</div>
                <canvas id="siteChart"></canvas>
            </div>
        </div>

    </main>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
<script>loadWorker({{ selected_worker_id }});</script>
{% endblock %}
